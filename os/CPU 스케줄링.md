# CPU 스케줄링

태그: OS

### CPU 스케줄링

- CPU 스케줄링은 운영체제가 프로세스들에게 공정하고 합리적으로 CPU  자원을 배분하는 것을 의미함
- 선점형과 비선점형 방식으로 구현할 수 있으며 여러 스케줄링 알고리즘 존재

### 선점, 비선점

- 선점형 스케줄링 : 프로세스가 CPU를 사용하고 있더라도 운영체제가 프로세스로부터 자원을 강제로 뺏고, 다른 프로세스에 할당할 수 있는 방식. 이로 인해 응답시간은 낮고 효율적이지만 컨텍스트 스위칭 오버헤드가 발생할 수 있음
- 비선점형 스케줄링 : 하나의 프로세스가 자원을 사용하고 있으면 해당 프로세스가 종료되거나 스스로 대기 상태로 전환대기 전까지 다른 프로세스가 자원을 점유할 수 없는 스케줄링 방식을 의미함. 응답시간이 길어질 수 있다는 문제가 있음

### CPU 알고리즘

- FCFS : 준비 큐에 삽입된 순서대로 프로세스들을 처리하는 비선점형 스케줄링 방식이다. 공정해보이지만 호위효과(Convoy Effect)가 발생할 수 있다는 가능성이 존재함. 여기서 말하는 호위효과는 실행 시간이 긴 시간의 프로세스들이 앞에 있는 경우 짧은 실행시간의 프로세스들이 많은 시간을 대기하는 현상을 의미함
- SJF : 준비 큐에 삽입된 프로세스 들 중 CPU 이용 시간이 가장 짧은 프로세스부터 실행되는 비선점형 스케줄링 방식. 호위효과는 방지하고 평균 대기시간이 짧다는 장점이 있음. 하지만 CPU 실행 시간이 긴 프로세스는 자원을 할당받지 못하고 무한정 대기하게 되는 상황인 기아 현상이 발생할 가능성이 존재한다.
- RR : FCFS에 타임 슬라이스 개념이 추가된 방식임. 정해진 타임 슬라이스 만큼 시간 동안 돌아가면서 CPU를 이용한 선점형 스케줄링 방식이다. 타임 슬라이스 크기가 크면 선입 선출과 비슷해지고, 너무 작은 경우에는 컨텍스트 스위칭 비용이 커질 수 있음
- SRT : SJF에 선점형 스케줄링을 혼합한 방식이다. 프로세스가 실행되는 도중 실행 시간이 짧은 프로세스가 추가되면 현재 실행되는 프로세스를 중단하고 해당 프로세스에게 CPU를 할당한다.
- Multilevel Queue Scheduling : 우선 순위별로 준비 큐를 여러 개 사용하는 방식임. 우선 순위가 가장 높은 큐에 있는 프로세스들을 먼저 처리하고, 우선순위가 가장 높은 큐가 비어있으면 그 다음 우선순위의 큐의 프로세스들을 처리함. 이 방식은 큐를 여러 개 두어서 프로세스 유형별로 우선순위를 구분해서 실행하기 때문에 편리하고, 큐별로 타임 슬라이스를 지정하거나 다른 스케줄링 알고리즘을 사용할 수 있음.

### 기아 현상 해결

- SJF, SRT, 다단계 큐 스케줄링 경우 우선순위 스케줄링임
- 이는 기아 현상이 발생할 수 있는데 이를 대비하여 에이징 기법이 존재한다.
- 새로 준비 상태가 된 프로세스가 있으면 우선순위가 가장 높은 우선순위 큐에 삽입되고, 타임 슬라이스 동안 실행된다.
- 해당 큐에서 실행이 끝나지 않는다면 다음 우선순위 큐에 삽입 됨
- 이를 통해 CPU를 오래 사용해야하는 프로세스는 점자 우선순위가 낮아지게 되서 기아현상이 발생할 수 있다.
- 우선순위가 낮은 큐에서 너무 오래 기다리고 있다면 점차 우선순위가 높은 큐로 이동시키는 에이징 기법을 적용해서 이러한 문제를 해결할 수 있다.