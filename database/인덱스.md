# 인덱스

태그: DB

### 인덱스란

- 인덱스는 데이터베이스에서 테이블의 검색 성능을 높여주는 방법
- 색인과 같은 역할을 하는 자료구조이다.
- 인덱스를 통해 풀 테이블 스캔이 아닌 인덱스 스캔으로 빠르게 데이터를 찾을 수 있다.

### 인덱스 구조

- B Tree, B+ Tree, Hash, Bitmap으로 구현될 수 있음
- 대부분 RDBMS에서는 B+ Tree 구조로 된 Index를 사용하여 검색속도를 향상시킨다.
- 인덱스를 생성하면 속성 값을 기준으로 정렬해서 데이터의 물리적 위치와 함께 (search-key, pointer)형태로 따로 저장함

### 인덱스 종류

- 클러스터링 인덱스 : 특정 컬럼을 기본키로 지정하면 자동으로 클러스터형 인덱스가 된다. 테이블 자체가 정렬된 하나의 인덱스이다.
- 세컨더리 인덱스 : create index를 통해 인덱스를 생성하거나 unique key로 지정하면 보조 인덱스가 생성된다. 별도의 파일 형태로 저장된다.

### 인덱스 장점

- 인덱스의 가장 중요한 장점은 검색 속도 향상
- 인덱스를 사용하면 기존 풀테이블 스캔에서 인덱스 스캔방식으로 데이터를 빠르게 찾아낼 수 있음

### 인덱스 단점

- 인덱스도 비용이기 때문에 인덱스를 구현하기 위해서는 저장공간이 추가로 필요함
- 데이터 갱신이 발생하면 인덱스를 구현한 자료구조 B+ Tree의 구조가 변경될 수 있음
- 그래서 과도하게 인덱스를 생성하면 데이터 갱신 작업에서 오히려 시간이 오래걸린다.

### 인덱스 선택 조건

- 자주 조회되고
- 수정 빈도는 낮고
- 카디널리티는 높고
- 선택도는 낮은 것
- 여기서 카디널리티와 선택도는 데이터의 중복 정도로서 카디널리티가 높으면 고유성이 높은 것이다.

### B+ Tree

- Hash를 인덱스로 사용하지 않는 이유는 정렬된 데이터가 아니기 때문에 부등호 연산시 매우 비효율적으로 동작함
- 즉, Hash는 등호 연산에만 특화되어 있어서 부등호 연산에는 적합하지 않음